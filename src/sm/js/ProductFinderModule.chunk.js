/*!
 * frontend
 * name: innogy-web,
 * buildDate: Tue Jul 11 2017 11:09:41 GMT+0200 (CEST),
 * packageVersion: 2.0.0
 */
webpackJsonp([5],{22:function(t,i,n){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(i,"__esModule",{value:!0});var o=n(1),a=e(o),u=function(){function t(i){(0,a.default)(this,t),this.node=i.node,this.config=i.config,this.identifier=i.identifier}return t.prototype.init=function(){return this},t.prototype.getIdentifier=function(){return this.identifier},t}();i.default=u},123:function(t,i,n){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(i,"__esModule",{value:!0});var o=n(125),a=e(o);i.default={location:a.default}},125:function(t,i,n){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}function o(t){return/[\d]{5}\s\D+/.test(t)}function a(t){var i=t.split(" ").join("+");return o(t)&&(i=i.substring(6)),new s.default(function(t,n){r.default.get(c.host+c.path+i,function(i){var n=[];r.default.each(i,function(t,i){i.zip?n.push(i.zip+" "+i.city):n.push(i.city)}),t(n)}).fail(function(t){n(t)})})}Object.defineProperty(i,"__esModule",{value:!0});var u=n(12),s=e(u),l=n(6),r=e(l),c={host:"",path:"/energiekaufhaus/rs/regionalisierung/autocomplete?limit=100&ortEingabe="};i.default={getSuggestions:a,checkSelectedSuggestion:function(t){return new s.default(function(i,n){o(t)&&i(t),a(t).then(function(t){i(t[0])}).catch(function(t){n(t)})})}}},174:function(t,i,n){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}function o(t){return/[\d]{5}\s\D+/.test(t)}Object.defineProperty(i,"__esModule",{value:!0});var a=n(1),u=e(a),s=n(3),l=e(s),r=n(2),c=e(r),d=n(211),f=e(d),h=n(5),p=e(h),g=function(t){function i(){return(0,u.default)(this,i),(0,l.default)(this,t.call(this,!0))}return(0,c.default)(i,t),i.prototype.init=function(i,n){var e=this;return t.prototype.init.call(this,i,n),this.$input.on("focus",function(){e.$input.val("")}),this},i.prototype._selectSuggestion=function(i){var n=this;o(i)?(t.prototype._selectSuggestion.call(this,i),p.default.mutateInstant(function(){n.$root.addClass("inline-editing--valid"),n.$root.trigger("select-validated-suggestion",i)})):this.makeSuggestions(i)},i}(f.default);i.default=g},175:function(t,i,n){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(i,"__esModule",{value:!0});var o=n(12),a=e(o),u=n(75),s=e(u),l=window.innogy,r=(new s.default).debugLocal(!0,"REGIONALISATION");if(!l)throw new Error("Cannot use regionalisation functions. No global innogy found");if(!l.regionalisation)throw new Error("Cannot use regionalisation functions. No regionalisation on global innogy found");i.default={getRegionalization:function(){return l.regionalisation.get().catch(function(t){return r.warn("Could not get regionalisation",t),a.default.reject(t)})},regionalize:function(t){var i=t.city,n=t.zip;return l.regionalisation.set(n,i).catch(function(t){return r.warn("Could not set regionalisation",t),a.default.reject(t)})}}},259:function(t,i,n){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(i,"__esModule",{value:!0});var o=n(1),a=e(o),u=n(3),s=e(u),l=n(2),r=e(l),c=n(9),d=e(c),f=n(175),h=e(f),p=n(174),g=e(p),v=n(123),_=e(v),$=n(5),y=e($),b=function(t){function i(){return(0,a.default)(this,i),(0,s.default)(this,t.call(this))}return(0,r.default)(i,t),i.prototype._getRegionalisierung=function(){return h.default.getRegionalization()},i.prototype._makeRegionalisierung=function(t,i,n){var e=this.$root.find(".consumption input").val();return this.location=n,h.default.regionalize(this._splitValue(n)).then(function(i){return t(e)})},i.prototype._splitValue=function(t){var i=t.slice(0,5),n=t.substr(6);return{zip:i,city:n}},i.prototype._checkService=function(){var t=this;h.default.getRegionalization().then(function(){y.default.mutateInstant(function(){t.$root.hasClass("not-available")||t.$root.addClass("available")})}).catch(function(){t.logger.info("Product Finder Service down"),t.$root.hasClass("not-available")||t.$root.addClass("available")})},i.prototype._validateLocation=function(){return this.$autocomplete.is(".inline-editing--valid")},i.prototype._validate=function(){},i.prototype._handleSubmit=function(t){t.preventDefault()},i.prototype.init=function(t,i){this.$root=t,this.$autocomplete=t.find(".autocomplete"),this.$form=t.find("form"),this.config=i,this._checkService(),this._validate(),this.$autocomplete.on("select-validated-suggestion",this._validate.bind(this)),this.$form.on("submit",this._handleSubmit.bind(this));var n=new g.default,e=_.default[this.$autocomplete.attr("data-gateway")||"location"];return n.init(this.$autocomplete,e),this},i}(d.default);i.default=b},677:function(t,i,n){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(i,"__esModule",{value:!0});var o=n(1),a=e(o),u=n(3),s=e(u),l=n(2),r=e(l),c=n(22),d=e(c),f=n(679),h=e(f),p=n(680),g=e(p),v=n(681),_=e(v),$=function(t){function i(n){return(0,a.default)(this,i),(0,s.default)(this,t.call(this,n))}return(0,r.default)(i,t),i.prototype.init=function(){t.prototype.init.call(this);var i=this.node[0].getAttribute("data-tpl");switch(i){case"pfc01":this.controller=(new h.default).init(this.node,this.config);break;case"pfc02":this.controller=(new g.default).init(this.node,this.config);break;case"pfc03":this.controller=(new _.default).init(this.node,this.config)}},i}(d.default);i.default=$},679:function(t,i,n){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}function o(t,i){v.default.mutateInstant(function(){i?t.addClass("disabled"):t.removeClass("disabled")})}function a(t,i){v.default.measureInstant(function(){var n=t.val();n>0?o(i,y.ENABLED):o(i,y.DISABLED)},1)}function u(){}Object.defineProperty(i,"__esModule",{value:!0});var s=n(1),l=e(s),r=n(3),c=e(r),d=n(2),f=e(d),h=n(259),p=e(h),g=n(5),v=e(g),_=n(213),$=e(_),y={ENABLED:!1,DISABLED:!0},b=function(t){function i(){return(0,l.default)(this,i),(0,c.default)(this,t.call(this))}return(0,f.default)(i,t),i.prototype._validate=function(){this._validateLocation()?(a.call(this,this.$electricityInput,this.$electricityBtn),a.call(this,this.$gasInput,this.$gasBtn)):(o(this.$electricityBtn,y.DISABLED),o(this.$gasBtn,y.DISABLED))},i.prototype.init=function(i,n){var e=this;return this.$electricityBtn=i.find(".electricity .btn"),this.$electricityInput=i.find(".electricity input"),this.$gasBtn=i.find(".gas .btn"),this.$gasInput=i.find(".gas input"),t.prototype.init.call(this,i,n),this.$autocomplete.on("select-validated-suggestion",function(t,i){return $.default.getCookie("innogy-pd")&&$.default.deleteCookie("innogy-pd"),e._makeRegionalisierung(u,t,i).catch(function(t){})}),this.$electricityInput.on("input",this._validate.bind(this)),this.$gasInput.on("input",this._validate.bind(this)),this},i}(p.default);i.default=b},680:function(t,i,n){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}function o(t,i){$.default.mutateInstant(function(){t.attr("disabled",i)})}function a(){var t=this;$.default.measure(function(){var i=t.$input.val(),n=t.$autocomplete.find("input").val();$.default.mutateInstant(function(){t.$acc.find(".location-value").text(n),t.$acc.find(".consumption-value").text(i)})})}function u(t,i){var n=this;$.default.measureInstant(function(){var e=t.val();e>0?(o(i,!1),$.default.mutateInstant(function(){n.$root.addClass("valid"),n.$root.removeClass("invalid"),a.call(n)})):(o(i,!0),$.default.mutateInstant(function(){n.$acc.removeClass("valid"),n.$root.removeClass("valid"),n.$root.addClass("invalid")}))})}function s(t){}function l(t,i){var n=this,e=function(e){return b.default.getCookie("innogy-pd")&&b.default.deleteCookie("innogy-pd"),n._makeRegionalisierung(s,t,i).catch(function(t){})};this._getRegionalisierung().then(function(t){e(t).then(window.location.reload)}).catch(e)}Object.defineProperty(i,"__esModule",{value:!0});var r=n(1),c=e(r),d=n(3),f=e(d),h=n(2),p=e(h),g=n(259),v=e(g),_=n(5),$=e(_),y=n(213),b=e(y),m=function(t){function i(){return(0,c.default)(this,i),(0,f.default)(this,t.call(this))}return(0,p.default)(i,t),i.prototype._validate=function(){this._validateLocation()?u.call(this,this.$input,this.$btn):(o(this.$btn,!0),this.$root.removeClass("valid"),this.$root.addClass("invalid"))},i.prototype.init=function(i){return this.$btn=i.find(".btn"),this.$input=i.find(".consumption input"),this.$acc=i.find("[data-tpl=acc02]"),t.prototype.init.call(this,i),this.$autocomplete.on("select-validated-suggestion",l.bind(this)),this.$input.on("input",this._validate.bind(this)),this},i}(v.default);i.default=m},681:function(t,i,n){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}function o(t,i){v.fasterdomPromised.mutateInstant(function(){i?t.addClass("disabled"):t.removeClass("disabled")})}function a(t){return t>0}function u(){var t=this,i=void 0,n=void 0;v.fasterdomPromised.measureInstant(function(){i=t.$electricityInput.val(),n=t.$gasInput.val()},1).then(function(){v.fasterdomPromised.mutateInstant(function(){a(i)||a(n)?o(t.$btn,_.ENABLED):o(t.$btn,_.DISABLED),a(i)?t.$gasInput.prop("disabled",!0):t.$gasInput.prop("disabled",!1),a(n)?t.$electricityInput.prop("disabled",!0):t.$electricityInput.prop("disabled",!1)})})}function s(){}Object.defineProperty(i,"__esModule",{value:!0});var l=n(1),r=e(l),c=n(3),d=e(c),f=n(2),h=e(f),p=n(259),g=e(p),v=n(5),_={ENABLED:!1,DISABLED:!0},$=function(t){function i(){return(0,r.default)(this,i),(0,d.default)(this,t.call(this))}return(0,h.default)(i,t),i.prototype._validate=function(){this._validateLocation()?u.call(this):o(this.$btn,_.DISABLED)},i.prototype.init=function(i){var n=this;return this.$btn=i.find(".btn"),this.$electricityInput=i.find(".electricity input"),this.$gasInput=i.find(".gas input"),t.prototype.init.call(this,i),this.$autocomplete.on("select-validated-suggestion",function(t,i){n._makeRegionalisierung(s,t,i).catch(function(t){})}),this.$electricityInput.on("input",this._validate.bind(this)),this.$gasInput.on("input",this._validate.bind(this)),this._validate(),this},i}(g.default);i.default=$}});
//# sourceMappingURL=/js/ProductFinderModule.chunk.js.map